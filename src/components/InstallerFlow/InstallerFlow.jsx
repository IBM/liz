/*
 * liz - Installation assistant for Linux on IBM Z
 *
 * (C) Copyright IBM Corp. 2023
 */

import React from "react";
import PropTypes from "prop-types";
import { ProgressIndicator, ProgressStep } from "@carbon/react";
import "./_installer-flow.scss";

const InstallerFlow = ({ onProgress, progressStep, progressStepComplete, progressStepInvalid, progressStepDisabled }) => {

  const descriptionForInvalidStep = "The data provided for this step is invalid.";
  const descriptionForCompleteStep = "The data required by this step is complete."
  const descriptionForIncompleteStep = "The data required by this step is incomplete."

  const getDescriptionForStep = (forStep) => {
    if (progressStepInvalid[forStep]) {
      return descriptionForInvalidStep;
    }
    if (progressStepComplete[forStep]) {
      return descriptionForCompleteStep;
    }
    return descriptionForIncompleteStep;
  }

  return (
    <>
      <div className="installer-flow__heading">Getting Started</div>
      <ProgressIndicator
        vertical
        currentIndex={progressStep}
        onChange={(index) => onProgress(index)}
      >
        <ProgressStep
          invalid={progressStepInvalid.inputFileSelection}
          complete={progressStepComplete.inputFileSelection}
          disabled={progressStepDisabled.inputFileSelection}
          current={progressStep === 0}
          label="Choose your input file"
          secondaryLabel="This virtual machine currently doesn't have a Host OS. Let's begin by adding your ISO file."
          description={getDescriptionForStep("inputFileSelection")}
        />
        <ProgressStep
          invalid={progressStepInvalid.information}
          complete={progressStepComplete.information}
          disabled={progressStepDisabled.information}
          current={progressStep === 1}
          label="Display information"
          secondaryLabel="Taken from the ISO file you have uploaded."
        />
        <ProgressStep
          invalid={progressStepInvalid.hint}
          complete={progressStepComplete.hint}
          disabled={progressStepDisabled.hint}
          current={progressStep === 2}
          label="Display hint"
          secondaryLabel="Infos needed to complete subsequent steps,"
        />
        <ProgressStep
          invalid={progressStepInvalid.networkDevice}
          complete={progressStepComplete.networkDevice}
          disabled={progressStepDisabled.networkDevice}
          current={progressStep === 3}
          label="Network device"
          secondaryLabel="If you are comming from DPM, the information will be autogenerated from there."
          description={getDescriptionForStep("networkDevice")}
        />
        <ProgressStep
          invalid={progressStepInvalid.networkAddress}
          complete={progressStepComplete.networkAddress}
          disabled={progressStepDisabled.networkAddress}
          current={progressStep === 4}
          label="Network address"
          secondaryLabel="Once the installation is complete, you're set to start managing."
          description={getDescriptionForStep("networkAddress")}
        />
        <ProgressStep
          invalid={progressStepInvalid.installationParameters}
          complete={progressStepComplete.installationParameters}
          disabled={progressStepDisabled.installationParameters}
          current={progressStep === 5}
          label="Installation parameters"
          secondaryLabel="Optional."
          description={getDescriptionForStep("installationParameters")}
        />
        <ProgressStep
          invalid={progressStepInvalid.miscParameters}
          complete={progressStepComplete.miscParameters}
          disabled={progressStepDisabled.miscParameters}
          current={progressStep === 6}
          label="Miscellaneous parameters"
          secondaryLabel="Optional."
        />
        <ProgressStep
          invalid={progressStepInvalid.downloadParamFile}
          complete={progressStepComplete.downloadParamFile}
          disabled={progressStepDisabled.downloadParamFile}
          current={progressStep === 7}
          label="Download param file"
          secondaryLabel=""
          description={getDescriptionForStep("downloadParamFile")}
        />
        <ProgressStep
          invalid={progressStepInvalid.nextSteps}
          complete={progressStepComplete.nextSteps}
          disabled={progressStepDisabled.nextSteps}
          current={progressStep === 8}
          label="Next Steps"
          secondaryLabel=""
        />
      </ProgressIndicator>
    </>
  );
};

InstallerFlow.propTypes = {
  onProgress: PropTypes.func.isRequired,
  progressStep: PropTypes.number.isRequired,
  progressStepComplete: PropTypes.shape({
    inputFileSelection: PropTypes.bool.isRequired,
    information: PropTypes.bool.isRequired,
    hint: PropTypes.bool.isRequired,
    networkDevice: PropTypes.bool.isRequired,
    networkAddress: PropTypes.bool.isRequired,
    installationParameters: PropTypes.bool.isRequired,
    miscParameters: PropTypes.bool.isRequired,
    downloadParamFile: PropTypes.bool.isRequired,
    nextSteps: PropTypes.bool.isRequired
  }).isRequired,
  progressStepInvalid: PropTypes.shape({
    inputFileSelection: PropTypes.bool.isRequired,
    information: PropTypes.bool.isRequired,
    hint: PropTypes.bool.isRequired,
    networkDevice: PropTypes.bool.isRequired,
    networkAddress: PropTypes.bool.isRequired,
    installationParameters: PropTypes.bool.isRequired,
    miscParameters: PropTypes.bool.isRequired,
    downloadParamFile: PropTypes.bool.isRequired,
    nextSteps: PropTypes.bool.isRequired
  }).isRequired,
  progressStepDisabled: PropTypes.shape({
    inputFileSelection: PropTypes.bool.isRequired,
    information: PropTypes.bool.isRequired,
    hint: PropTypes.bool.isRequired,
    networkDevice: PropTypes.bool.isRequired,
    networkAddress: PropTypes.bool.isRequired,
    installationParameters: PropTypes.bool.isRequired,
    miscParameters: PropTypes.bool.isRequired,
    downloadParamFile: PropTypes.bool.isRequired,
    nextSteps: PropTypes.bool.isRequired
  }).isRequired
};

export default InstallerFlow;
